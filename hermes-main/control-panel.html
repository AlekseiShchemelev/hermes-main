<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏</title>
		<link rel="stylesheet" href="style.css" />
	</head>
	<body>
		<div class="fixed-navigation">
			<div class="nav-title">‚öôÔ∏è –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
			<div class="nav-controls">
				<button class="back-btn" onclick="window.close()">–ó–∞–∫—Ä—ã—Ç—å</button>
			</div>
		</div>

		<div class="container" style="padding-top: 80px">
			<div class="control-panel">
				<h1 style="text-align: center; color: #1a73e8; margin-bottom: 30px">
					‚öôÔ∏è –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏
				</h1>

				<!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ -->
				<div class="tabs" style="margin-bottom: 20px">
					<button class="tab-btn active" onclick="showTab('stats')">
						üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
					</button>
					<button class="tab-btn" onclick="showTab('data')">
						üìÅ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏
					</button>
					<button class="tab-btn" onclick="showTab('danger')">
						‚ö†Ô∏è –û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞
					</button>
				</div>

				<div id="statsTab" class="tab-content active">
					<div class="stats-grid">
						<div class="stat-card">
							<div class="stat-value" id="totalOrders">0</div>
							<div class="stat-label">–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤</div>
						</div>
						<div class="stat-card">
							<div class="stat-value" id="uniqueMaterials">0</div>
							<div class="stat-label">–†–∞–∑–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</div>
						</div>
						<div class="stat-card">
							<div class="stat-value" id="uniqueOrderNumbers">0</div>
							<div class="stat-label">–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤</div>
						</div>
					</div>
				</div>

				<div id="dataTab" class="tab-content">
					<div class="btn-container" style="display: grid; gap: 10px">
						<button class="btn btn-primary" onclick="exportToCSV()">
							üìä –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV
						</button>
						<button class="btn btn-secondary" onclick="startImport(false)">
							üì• –ò–º–ø–æ—Ä—Ç –ø–æ –Ω–æ–º–µ—Ä—É –∑–∞–∫–∞–∑–∞
						</button>
						<button class="btn btn-secondary" onclick="startImport(true)">
							üì• –ò–º–ø–æ—Ä—Ç –ø–æ –Ω–æ–º–µ—Ä—É –¥–Ω–∏—â–∞
						</button>
						<button class="btn btn-secondary" onclick="backupData()">
							üíæ –°–æ–∑–¥–∞—Ç—å backup
						</button>
						<button class="btn btn-secondary" onclick="restoreBackup()">
							üì§ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å backup
						</button>
					</div>
				</div>

				<div id="dangerTab" class="tab-content">
					<div class="danger-zone">
						<h2 class="danger-title">‚ö†Ô∏è –û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞</h2>
						<p class="danger-text">
							–≠—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å. –í—Å–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ
							—É–¥–∞–ª–µ–Ω—ã. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å backup –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º —ç—Ç–∏—Ö
							–æ–ø–µ—Ä–∞—Ü–∏–π.
						</p>
						<div class="btn-container">
							<button class="btn btn-danger" onclick="clearAllData()">
								üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<input
			type="file"
			id="importFileInput"
			accept=".csv"
			style="display: none"
		/>
		<input
			type="file"
			id="restoreFileInput"
			accept=".json"
			style="display: none"
		/>

		<script src="js/database.js"></script>
		<script src="js/data-manager.js"></script>
		<script src="js/control-panel.js"></script>

		<script>
			// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
			function showTab(tabName) {
				// –°–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
				document.querySelectorAll('.tab-content').forEach(tab => {
					tab.classList.remove('active')
				})

				// –£–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
				document.querySelectorAll('.tab-btn').forEach(btn => {
					btn.classList.remove('active')
				})

				// –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
				document.getElementById(tabName + 'Tab').classList.add('active')

				// –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É
				document
					.querySelector(`.tab-btn[onclick="showTab('${tabName}')"]`)
					.classList.add('active')
			}
		</script>
	</body>
</html>
